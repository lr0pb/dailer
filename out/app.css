:root {
  --headerHeight: 16rem;
  --footerHeight: 18rem;
  --fullHeight: calc(100vh - var(--headerHeight) - var(--footerHeight));
  --defaultFullWidth: 92.5vw;
  --fullWidth: var(--defaultFullWidth);
  --defaultGridContent: calc(100vw - 6rem);
  --gridContent: var(--defaultGridContent);

  --yellow: #cda61a;
  --red: #e32727;
  --green: #3ea317;
  --blue: #1aa2cd;
  --fastAnim: 0.15s;
  --normalAnim: 0.3s;
  --msgShowing: 3s;
  /* Color section */
  --brand: 215deg;

  --mainBg: hsl(var(--brand), 50%, 3%);
  --transparentBg: rgba(0, 0, 0, 0.1);
  --mainText: white;
  --darkBorder: hsla(var(--brand), 12%, 16%, 0.5);
  --darkShadow: hsl(var(--brand), 10%, 35%);
  --accent: hsl(var(--brand), 60%, 51%);
  --secondary: hsl(var(--brand), 15%, 35%);
  --accentGreen: #379b00;
  --accentRed: #cb3a3a;
  --lightBlueBg: hsl(var(--brand), 19%, 48%);
  --taskBg: hsla(var(--brand), 10%, 17%, 0.5);
  --gradientLight: #5a73f2;
  --gradientDark: #0f0b30;
  --infoRectBg: hsla(var(--brand), 40%, 13%, 0.5);
  --lightBorder: rgba(227, 227, 227, 0.35);
  --popupBg: #343434;
  --marker: hsl(var(--brand), 100%, 90%);
  --msgBg: var(--mainBg);
  --focusBorder: #d1d1d1;
  --focusBg: hsl(var(--brand), 10%, 18%);
  accent-color: var(--accent);
}

html { font-size: 1.25vmin; }

@media (prefers-color-scheme: light) {
  :root {
    --mainBg: hsl(var(--brand), 30%, 98%);
    --transparentBg: rgba(255, 255, 255, 0.2);
    --mainText: black;
    --darkBorder: hsla(var(--brand), 60%, 90%, 0.5);
    --darkShadow: hsl(var(--brand), 35%, 85%);
    /*--accent: #699ade;*/
    --secondary: hsl(var(--brand), 17%, 55%);
    /*--accentGreen: #54c416;
    --accentRed: #ef5353;*/
    --lightBlueBg: hsl(var(--brand), 67%, 82%);
    --taskBg: hsla(var(--brand), 52%, 91%, 0.5);
    /*--gradientLight: #9aaafa;*/
    --gradientDark: #463e8c;
    --infoRectBg: hsla(var(--brand), 20%, 96%, 0.5);
    --lightBorder: rgb(174, 174, 174, 0.35);
    --popupBg: var(--mainBg);
    --marker: hsl(var(--brand), 100%, 75%);
    --msgBg: #232323;
    --focusBorder: #626262;
    --focusBg: hsl(var(--brand), 59%, 92%);
  }
}

@media (pointer: fine) and (hover: hover) {
  button, input:not(:disabled), select:not(:disabled), [role="button"] {
    cursor: pointer;
  }
  input[type="text"]:not(:disabled) { cursor: text; }
  input[type="range"]:not(:disabled) { cursor: grab; }
  input[type="range"]:focus-visible {
    outline: var(--accent) solid medium;
    outline-offset: -0.7rem;
  }
  input:hover:not(:disabled), select:hover:not(:disabled) {
    --border: var(--focusBorder);
  }
  input:-webkit-autofill:hover, input:autofill:hover {
    --border: var(--mainText);
  }
  input:focus, select:focus {
    --border: var(--accent);
    outline: white solid thin;
  }
  button:hover { filter: brightness(0.8); }
  button:focus-visible, [role="button"]:focus-visible {
    border-color: var(--mainText) !important;
  }
  [role="button"]:hover:not(:disabled), [role="button"]:focus,
  [role="button"]:not(:focus):focus-within {
    background-color: var(--focusBg);
  }
  button:active, [role="button"]:active { transform: scale(0.97); }
  button.emojiBtn:active { transform: scale(0.93); }

  @media (prefers-reduced-motion: no-preference) {
    button:hover { transform: scale(0.97); }
    button:active, button.emojiBtn:hover { transform: scale(0.93); }
    button.emojiBtn:active { transform: scale(0.78); }
    button:disabled:hover { transform: none; }
  }
}

@media (pointer: coarse) and (prefers-reduced-motion: no-preference) {
  button:active, [role="button"]:active {transform: scale(0.95); }
  button.emojiBtn:active { transform: scale(0.89); }
  button:disabled:active { transform: none; }
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --fastAnim: 0;
    --normalAnim: 0;
    --msgShowing: 0;
  }
  .hidePrevPage { opacity: 0; }
}

@media (orientation: portrait) {
  .floatingMsg.notFixed { min-height: 17rem; }
}

@media (max-height: 675px) and (orientation: portrait) and (max-aspect-ratio: 12 / 16) {
  :root {
    --defaultFullWidth: 93.2vw;
    --headerHeight: 13rem;
    --footerHeight: 14rem;
  }
  html { font-size: 1.15vmin; }
}

@media (min-width: 470px) {
  :root {
    --fullWidth: 450px;
    --gridContent: var(--fullWidth);
  }
  html { font-size: 0.65vmin; }
}

@media (min-width: 470px) and (orientation: portrait) {
  :root { --fullWidth: 75vw; }
}

.historyMonth > h4 { height: 1.87em; }

@media (min-width: 935px) and (orientation: landscape) {
  :root { --gridContent: calc(var(--fullWidth) * 2 + 3rem); }
  .doubleColumns:not(.center) {
    display: flex; min-height: fit-content;
    flex-direction: row !important;
    flex-wrap: wrap;
    justify-content: space-between;
    align-content: baseline;
  }
  .doubleColumns { width: var(--gridContent); }
  .floatingMsg.notFixed { min-height: 13rem; }
  .historyMonth > h4 { height: 1.7em; }
  .historyMonth > h4 > .emojiSymbol { margin-top: 0.5rem; }
}

.doubleColumns > * {
  width: var(--fullWidth);
  margin-top: 0; margin-left: 0; margin-right: 0;
}
.doubleColumns > .fullHeight { min-height: var(--fullHeight); }

body, .page, #settings, #popup, noscript {
  width: 100vw; height: 100vh;
  height: stretch;
  height: -webkit-fill-available;
  height: 100svh;
  overflow: hidden;
  background-color: var(--mainBg);
  color: var(--mainText);
  margin: 0;
}
noscript {
  position: fixed;
  z-index: 999;
}
.page, #settings {
  position: fixed;
  display: grid;
  top: 0; left: 0;
  grid-template-areas:
    "... header ..."
    "... content ..."
    "footer footer footer"
  ;
  grid-template-rows: var(--headerHeight) 1fr var(--footerHeight);
  grid-template-columns: minmax(3rem, 1fr) var(--gridContent) minmax(3rem, 1fr);
}
.compress .page, .compress #settings {
  --headerHeight: 15rem;
  --footerHeight: 17rem;
  --fullHeight: calc(100vh - var(--headerHeight) - var(--footerHeight));
  /*background-image: linear-gradient(180deg, var(--accent) 0.35%, transparent 0%);*/
}
#settings {
  z-index: 1;
  --footerHeight: 0 !important;
  transform: translateX(100vw);
  transition: transform var(--normalAnim) cubic-bezier(.22,.61,.36,1);
}
#settings > .content > *:last-child:not(.doubleColumns) {
  margin-bottom: 4rem;
}
.page {
  transform: translateX(100vw);
  transition: transform var(--normalAnim) cubic-bezier(.86,0,.07,1);
  background-size: cover;
}
.basic { transition-duration: calc(var(--normalAnim) * 2); }
.showing { transform: translateX(0); }
.hidePrevPage { transform: translateX(-35vw); }
.basic.hidePrevPage { transform: translateX(-100vw); }

.basic .emojiSymbol {
  animation: rotation calc(var(--normalAnim) * 6) linear infinite;
}
.basic.hidePrevPage .emojiSymbol {
  animation-play-state: paused;
}
@keyframes rotation {
  100% { transform: rotateZ(1turn); }
}

.error {
  position: fixed;
  z-index: 999;
}

.header { grid-area: header; }
.content { grid-area: content; }
.footer { grid-area: footer; }

.header, .content, .footer, .task, .floatingMsg, #infoBackground,
.dataLine {
  display: flex;
}
.header > h1, .header > h4 {
  margin-right: auto;
  line-height: 1.2;
}
.content {
  flex-direction: column;
  align-items: start;
  overflow: hidden auto;
  scroll-snap-type: y mandatory;
}
.content, .hiddenScroll {
  scrollbar-width: none;
}
.content::-webkit-scrollbar, .hiddenScroll::-webkit-scrollbar {
  width: 0; height: 0;
}
.header, .footer, .content.center, .floatingMsg {
  align-items: center;
}
.footer, .center {
  justify-content: center;
}
.center {
  align-items: center;
  text-align: center;
}
.center > h2 { margin: 3rem; }
.center > * {
  margin-left: 6rem !important;
  margin-right: 6rem !important;
}
.center > *:last-child {
  margin-bottom: 3rem !important;
}
.slider {
  flex-direction: row;
  scroll-snap-type: x mandatory;
}
.slider > * { min-width: 100%; height: 100%; }

#onboardingBg {
  width: var(--fullWidth); height: var(--fullWidth);
  background-image: radial-gradient(#7070c570, transparent 70%);
  position: absolute;
}

body, .content, h1, h2, h3, h4, p, button {
  margin: 0;
  font-family: Arial, "Noto Color Emoji", "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
  -webkit-user-select: none;
  user-select: none;
}

h1, h4 {
  font-size: 6rem;
}
h2 {
  font-size: 4.9rem;
  margin: 1rem;
  line-height: 1.2;
}
h3, #message {
  font-size: 3.8rem;
  margin: 1rem;
  line-height: 1.17;
}
p {
  font-size: 2.5rem;
  margin: 0 1rem;
  line-height: 1.12;
}
.emoji {
  font-size: 9rem;
}
.emojiSymbol {
  height: 1.1em; width: 1.1em;
  margin: 0.15em 0.1em;
  vertical-align: -0.05em;
  color: transparent;
  display: inline-block;
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;
}
p > .emojiSymbol {
  margin-top: 0; margin-bottom: 0;
}
strong {
  background-color: var(--darkShadow);
  padding: 0.4rem 1.2rem;
  border-radius: 3.5rem;
  font-weight: bold;
}

button, .task, #message, input, select, #infoBackground,
.infoRect, #popup > div, .floatingMsg, .historyMonth > * {
  box-sizing: border-box;
  background-origin: border-box;
}

button, .task, #message, #infoBackground,
.infoRect, #popup > div, .floatingMsg {
  border-radius: 2.5rem;
  border: 0.9rem solid var(--darkBorder);
  margin: 2.5rem 1.5rem;
}
.content > button {
  margin: 2rem 0;
}

button, [role="button"] { outline: none !important; }
[role="button"] {
  transition: background-color var(--fastAnim),
    transform var(--normalAnim), border-color var(--normalAnim);
}
button {
  min-height: 11.9rem;
  font-size: 4.3em;
  font-weight: 700;
  padding: 2rem 4rem 2rem 3rem;
  color: white; --bgColor: var(--accent);
  background-color: var(--bgColor) !important;
  line-height: 1.3;
  transition: filter var(--fastAnim),
    transform var(--normalAnim), border-color var(--normalAnim);
}
.compress button {
  min-height: 11.5rem;
  padding: 1.5rem 4rem 1.5rem 3rem;
}
button.smallBtn {
  min-height: 7.87rem;
  font-size: 4em;
  padding: 0 2rem 0 1.5rem;
  margin: 0;
  border-color: transparent;
}
button.noEmoji {
  padding-right: 3rem;
}
button.emojiBtn {
  min-height: 0;
  font-size: 5em;
  --bgColor: transparent;
  border-color: transparent;
  margin: 0;
  padding: 0 1rem;
  line-height: 1.2;
}
button.secondary {
  --bgColor: var(--secondary);
}
button.success {
  --bgColor: var(--accentGreen);
}
button.danger {
  --bgColor: var(--accentRed);
}
button.transparent {
  color: var(--mainText);
  --bgColor: var(--transparentBg);
}
button:disabled, [disabled]:not(input, select) {
  filter: grayscale(1);
  cursor: default;
}

#message, .floatingMsg:not(.notFixed) {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  margin: 0 !important;
}

#message {
  display: none; z-index: 999;
  width: var(--fullWidth); min-height: 5rem;
  padding: 2rem;
  bottom: 4rem;
  background-image: linear-gradient(90deg, var(--color) 0%, var(--msgBg) 75%);
  border-color: var(--color);
  color: white;
}
#message.animate {
  display: block;
  animation: msgShowing var(--msgShowing);
}
@keyframes msgShowing {
  0% {opacity: 0;}
  15% {opacity: 1;}
  80% {opacity: 1;}
  100% {opacity: 0;}
}

.floatingMsg {
  width: var(--gridContent);
  background-color: var(--lightBlueBg);
  bottom: var(--footerHeight);
}
.floatingMsg.notFixed { margin: 1rem 0; }
.floatingMsg h3 {
  margin: 3rem;
  text-align: left;
}
.floatingMsg button {
  margin-left: auto;
  margin-right: 3rem;
}

@keyframes elemShowing {
  0% {opacity: 0;}
  100% {opacity: 1;}
}
.task, .infoRect, #history, .floatingMsg {
  animation: elemShowing var(--normalAnim) forwards;
}
.task, .infoRect {
  opacity: 0;
  animation-delay: 0.05s;
}

.task {
  width: var(--fullWidth);
  /*background-color: #777777;*/
  background-color: var(--taskBg);
  border-color: transparent;
  flex-direction: row;
  margin: 0 0 2.5rem;
}
.compress .task {
  margin: 0 0 2.0rem;
}
.task > div {
  margin: 1rem auto 2rem 2rem;
  text-align: left;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.compress .task > div {
  margin: 0.2rem auto 1.2rem 1.0rem;
}
.task h2 { margin: 1.5rem auto 0 1rem; }
.task > :last-child { margin-right: 1.5rem; }
.compress .task > :last-child { margin-right: 0.5rem; }
.first { margin-top: 2.5rem; }
.compress .first { margin-top: 2.0rem; }

.customBgContainer .task {
  --blur: 12px;
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
}

#infoBackground, .itemsHolder, #history, #history > div, .slider > * {
  scroll-snap-align: start;
}

#infoBackground {
  width: var(--fullWidth); min-height: 32rem;
  background-image: linear-gradient(135deg, var(--gradientLight) -10%, var(--gradientDark) 60%);
  flex-direction: column-reverse;
  margin: 0 0 2rem;
}
#infoBackground > h4 {
  margin: 2rem 3rem;
  color: white;
}

.itemsHolder, #history, .historyMonth {
  width: var(--fullWidth);
  display: flex; flex-wrap: wrap;
}

.itemsHolder, input, select, progress {
  min-width: var(--fullWidth);
  margin: 1rem 0;
}

.infoRect {
  width: calc(var(--fullWidth) * var(--coef) / 2 - 3rem);
  min-height: 24rem;
  background-color: var(--infoRectBg);
  background-image: linear-gradient(150deg, var(--color) -40%, transparent 40%);
  border-color: var(--darkBorder);
  margin: 1.5rem;
}
.infoRect > * {
  margin: 2rem 2.5rem;
}

input, select {
  min-height: 8.5rem;
  padding: 1.5rem 2rem;
  background-color: white;
  border: 0.8rem solid var(--border);
  --border: var(--darkShadow);
  border-radius: 1.5rem;
  outline: none;
  transition: border-color var(--fastAnim);
}
input:disabled, select:disabled {
  background-color: var(--darkShadow);
  color: var(--mainText);
  opacity: 1;
}
input:-webkit-autofill, input:autofill { --border: #9fc0fb; }
progress {
  min-height: 4rem;
  margin: 5rem 0;
  cursor: progress;
}
a { color: var(--accent); }
a:visited { color: var(--secondary); }

.pageBtn, .hidedUI, #editButtons, #popup, input[type="file"], .uploadUI, .uploadSuccess,
.downloadUI, .downloadLink, .historyMonth > [data-used="false"], .completed, .forgotten,
.notifNotAllowed {
  display: none;
}

#popup {
  position: fixed; z-index: 900;
  background-color: rgba(0, 0, 0, 0.4);
}
#popup > div {
  width: calc(var(--fullWidth) - 7rem);
  background-color: var(--popupBg);
  margin: 0;
}
#popup h2:not(.emoji) {
  margin-top: 0;
  margin-bottom: 1rem;
}

#history {
  flex-direction: row;
  flex-wrap: nowrap;
  align-content: baseline;
  overflow: auto hidden;
  scroll-snap-type: x mandatory;
}
#history > * { scroll-snap-stop: always; }
#history > * > h3 { text-align: center; }
.historyMonth > * {
  width: calc(var(--fullWidth) / 7);
  text-align: center;
  margin: 0.5rem 0;
  padding: 0.5rem 0;
  border: 0.8rem solid transparent;
  border-radius: 2rem;
}
#history div:last-child .historyMonth > *:last-child {
  background-color: var(--marker);
}

.togglableElement > *:first-child {
  transition: transform var(--normalAnim);
}
.togglableElement > *:last-child {
  transition: opacity var(--normalAnim);
}

.dataLine {
  min-width: var(--fullWidth);
  align-items: baseline;
}
.dataLine p { word-break: break-all; }
